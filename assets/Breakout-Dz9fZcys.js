import{q as ve,t as ge,r as v,j as b,d as re,e as H,f as oe,v as se,g as ie,w as we,x as Y,y as U,z as be,A as Me,C as Re,D as Z,s as ae,c as ce,l as ke,o as ee,p as Ce,E as te,P as Se}from"./index-x6pBeOpD.js";import{g as Pe,A as Te,T as je,I as Ee,b as $e,S as Le,M as O,r as N,h as ne,d as q}from"./ArrowBack-CUzQUBZ4.js";const le=ve();function ue({props:i,name:a,defaultTheme:f,themeId:m}){let g=ge(f);return m&&(g=g[m]||g),Pe({theme:g,name:a,props:i})}const Be=se(),Ae=le("div",{name:"MuiContainer",slot:"Root",overridesResolver:(i,a)=>{const{ownerState:f}=i;return[a.root,a[`maxWidth${H(String(f.maxWidth))}`],f.fixed&&a.fixed,f.disableGutters&&a.disableGutters]}}),Ge=i=>ue({props:i,name:"MuiContainer",defaultTheme:Be}),We=(i,a)=>{const f=y=>ie(a,y),{classes:m,fixed:g,disableGutters:M,maxWidth:h}=i,R={root:["root",h&&`maxWidth${H(String(h))}`,g&&"fixed",M&&"disableGutters"]};return oe(R,f,m)};function De(i={}){const{createStyledComponent:a=Ae,useThemeProps:f=Ge,componentName:m="MuiContainer"}=i,g=a(({theme:h,ownerState:R})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!R.disableGutters&&{paddingLeft:h.spacing(2),paddingRight:h.spacing(2),[h.breakpoints.up("sm")]:{paddingLeft:h.spacing(3),paddingRight:h.spacing(3)}}}),({theme:h,ownerState:R})=>R.fixed&&Object.keys(h.breakpoints.values).reduce((y,w)=>{const S=w,P=h.breakpoints.values[S];return P!==0&&(y[h.breakpoints.up(S)]={maxWidth:`${P}${h.breakpoints.unit}`}),y},{}),({theme:h,ownerState:R})=>({...R.maxWidth==="xs"&&{[h.breakpoints.up("xs")]:{maxWidth:Math.max(h.breakpoints.values.xs,444)}},...R.maxWidth&&R.maxWidth!=="xs"&&{[h.breakpoints.up(R.maxWidth)]:{maxWidth:`${h.breakpoints.values[R.maxWidth]}${h.breakpoints.unit}`}}}));return v.forwardRef(function(R,y){const w=f(R),{className:S,component:P="div",disableGutters:k=!1,fixed:l=!1,maxWidth:$="lg",classes:B,...E}=w,C={...w,component:P,disableGutters:k,fixed:l,maxWidth:$},A=We(C,m);return b.jsx(g,{as:P,ownerState:C,className:re(A.root,S),ref:y,...E})})}const Ne=se(),Fe=le("div",{name:"MuiStack",slot:"Root"});function Ve(i){return ue({props:i,name:"MuiStack",defaultTheme:Ne})}function ze(i,a){const f=v.Children.toArray(i).filter(Boolean);return f.reduce((m,g,M)=>(m.push(g),M<f.length-1&&m.push(v.cloneElement(a,{key:`separator-${M}`})),m),[])}const Ie=i=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[i],Ue=({ownerState:i,theme:a})=>{let f={display:"flex",flexDirection:"column",...Y({theme:a},U({values:i.direction,breakpoints:a.breakpoints.values}),m=>({flexDirection:m}))};if(i.spacing){const m=be(a),g=Object.keys(a.breakpoints.values).reduce((y,w)=>((typeof i.spacing=="object"&&i.spacing[w]!=null||typeof i.direction=="object"&&i.direction[w]!=null)&&(y[w]=!0),y),{}),M=U({values:i.direction,base:g}),h=U({values:i.spacing,base:g});typeof M=="object"&&Object.keys(M).forEach((y,w,S)=>{if(!M[y]){const k=w>0?M[S[w-1]]:"column";M[y]=k}}),f=Me(f,Y({theme:a},h,(y,w)=>i.useFlexGap?{gap:Z(m,y)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Ie(w?M[w]:i.direction)}`]:Z(m,y)}}))}return f=Re(a.breakpoints,f),f};function Oe(i={}){const{createStyledComponent:a=Fe,useThemeProps:f=Ve,componentName:m="MuiStack"}=i,g=()=>oe({root:["root"]},y=>ie(m,y),{}),M=a(Ue);return v.forwardRef(function(y,w){const S=f(y),P=we(S),{component:k="div",direction:l="column",spacing:$=0,divider:B,children:E,className:C,useFlexGap:A=!1,...F}=P,T={direction:l,spacing:$,useFlexGap:A},z=g();return b.jsx(M,{as:k,ownerState:T,ref:w,className:re(z.root,C),...F,children:B?ze(E,B):E})})}const qe=De({createStyledComponent:ae("div",{name:"MuiContainer",slot:"Root",overridesResolver:(i,a)=>{const{ownerState:f}=i;return[a.root,a[`maxWidth${H(String(f.maxWidth))}`],f.fixed&&a.fixed,f.disableGutters&&a.disableGutters]}}),useThemeProps:i=>ce({props:i,name:"MuiContainer"})}),He=Oe({createStyledComponent:ae("div",{name:"MuiStack",slot:"Root"}),useThemeProps:i=>ce({props:i,name:"MuiStack"})}),Ke=16/9;function Je(){const i=v.useRef(null),a=v.useRef(null),f=v.useRef(null),[m,g]=v.useState(!1),[M,h]=v.useState("Normal"),[R,y]=v.useState(0),[w,S]=v.useState(3),P=v.useRef([]),k=v.useRef({x:0,y:0,vx:0,vy:0,r:8}),l=v.useRef({x:0,y:0,w:120,h:16,speed:800}),$=v.useRef([]),B=v.useRef([]),E=v.useRef([]),C=v.useRef({}),[A,F]=v.useState(1),T=v.useRef([]),z=ke();function fe(){const n=i.current,r=n.parentElement.getBoundingClientRect(),c=Math.max(1,window.devicePixelRatio||1),x=Math.floor(r.width),u=Math.floor(r.width/Ke);n.style.width=`${x}px`,n.style.height=`${u}px`,n.width=Math.floor(x*c),n.height=Math.floor(u*c),n.getContext("2d").setTransform(c,0,0,c,0,0)}function K(n,e=1){const x=Math.min(8,3+e),u=8,o=(n-u*11)/10,s=Math.max(18,22-Math.floor(e/2)),t=[];for(let d=0;d<x;d++)for(let j=0;j<10;j++){const L=Math.random();let p="normal",G=1;L<.08+e*.01?(p="unbreakable",G=-1):L<.2+e*.02&&(p="strong",G=2),t.push({x:u+j*(o+u),y:u+d*(s+u)+20,w:o,h:s,hits:G,alive:!0,type:p})}P.current=t}function V(n,e){l.current.w=Math.max(72,Math.min(220,n*.14)),l.current.h=Math.max(12,e*.03),l.current.x=(n-l.current.w)/2,l.current.y=e-l.current.h-12,k.current.r=Math.max(6,Math.min(14,n*.008)),N(k.current,n,e,null),y(0),S(3),B.current=[],$.current=[],E.current=[],C.current={},F(1);const r={x:0,y:0,vx:0,vy:0,r:Math.max(6,Math.min(14,n*.008))};N(r,n,e,null),T.current=[r],M==="Easy"&&X(r,2),K(n,1)}v.useEffect(()=>{const n=i.current;function e(){fe();const r=n.width/Math.max(1,window.devicePixelRatio||1),c=n.height/Math.max(1,window.devicePixelRatio||1);V(r,c),_()}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),v.useEffect(()=>{if(!m){a.current&&(cancelAnimationFrame(a.current),a.current=null,f.current=null);return}function n(e){f.current||(f.current=e);const r=Math.min(.05,(e-f.current)/1e3);f.current=e,xe(r),_(),a.current=requestAnimationFrame(n)}return a.current=requestAnimationFrame(n),()=>{a.current&&cancelAnimationFrame(a.current),a.current=null,f.current=null}},[m,M]);function D(n,e,r=12){const c=$.current;for(let x=0;x<r;x++)c.push({x:n,y:e,vx:(Math.random()-.5)*240,vy:(Math.random()-.5)*240-60,life:.6+Math.random()*.8})}function X(n,e=2){const r=T.current;for(let c=0;c<e;c++){const x=Math.random()*Math.PI-Math.PI/2,u=Math.sqrt(n.vx*n.vx+n.vy*n.vy)||320,o={x:n.x+(Math.random()-.5)*12,y:n.y+(Math.random()-.5)*12,vx:Math.cos(x)*u*(.8+Math.random()*.6),vy:Math.sin(x)*u*(.8+Math.random()*.6),r:n.r};r.push(o)}}function de(n){const e=$.current;for(let r=e.length-1;r>=0;r--)e[r].life-=n,e[r].x+=e[r].vx*n,e[r].y+=e[r].vy*n,e[r].vy+=600*n,e[r].life<=0&&e.splice(r,1)}function pe(n){const e=B.current;for(const r of T.current)e.unshift({x:r.x,y:r.y,life:.45});for(let r=e.length-1;r>=0;r--)e[r].life-=n,e[r].life<=0&&e.splice(r,1)}function xe(n){const e=i.current,r=e.width/Math.max(1,window.devicePixelRatio||1),c=e.height/Math.max(1,window.devicePixelRatio||1),x=T.current;for(let s=x.length-1;s>=0;s--){const t=x[s];t.x+=t.vx*n,t.y+=t.vy*n,t.x-t.r<0&&(t.x=t.r,t.vx*=-1),t.x+t.r>r&&(t.x=r-t.r,t.vx*=-1),t.y-t.r<0&&(t.y=t.r,t.vy*=-1);const d=l.current;if(t.y+t.r>=d.y&&t.y-t.r<=d.y+d.h&&t.x+t.r>=d.x&&t.x-t.r<=d.x+d.w){t.y=d.y-t.r,t.vy*=-1;const L=(t.x-(d.x+d.w/2))/(d.w/2);t.vx+=L*240,ne(t),D(t.x,t.y,8)}const j=P.current;for(let L=0;L<j.length;L++){const p=j[L];if(p.alive&&t.x+t.r>=p.x&&t.x-t.r<=p.x+p.w&&t.y+t.r>=p.y&&t.y-t.r<=p.y+p.h){const G=t.x+t.r-p.x,J=p.x+p.w-(t.x-t.r),he=t.y+t.r-p.y,me=p.y+p.h-(t.y-t.r),Q=Math.min(G,J,he,me);if(Q===G||Q===J?t.vx*=-1:t.vy*=-1,p.type==="unbreakable"||(p.type==="strong"?(p.hits-=1,p.hits<=0&&(p.alive=!1)):p.alive=!1),p.alive)y(W=>W+40),D(t.x,t.y,8);else if(y(W=>W+100),D(t.x,t.y,18),Math.random()<.14){const W=["expand","life","slow","multiball"],ye={x:p.x+p.w/2-12,y:p.y+p.h/2,w:24,h:14,vy:80+Math.random()*60,type:W[Math.floor(Math.random()*W.length)],alive:!0};E.current.push(ye)}break}}t.y-t.r>c&&x.splice(s,1)}if(T.current.length===0)if(S(s=>s-1),w-1<=0)g(!1),V(r,c);else{const s={x:0,y:0,vx:0,vy:0,r:Math.max(6,Math.min(14,r*.008))};N(s,r,c,null),T.current=[s]}k.current.y-k.current.r>c&&(S(s=>s-1),w-1<=0?(g(!1),V(r,c)):N(k.current,r,c,null));const u=E.current;for(let s=u.length-1;s>=0;s--){const t=u[s];if(!t.alive){u.splice(s,1);continue}if(t.y+=t.vy*n,t.y+t.h>=l.current.y&&t.x+t.w>=l.current.x&&t.x<=l.current.x+l.current.w){if(t.type==="expand")l.current.w=Math.min(l.current.w*1.5,500),C.current.expand=performance.now()+8e3;else if(t.type==="life")S(d=>d+1);else if(t.type==="slow")k.current.vx*=.7,k.current.vy*=.7,C.current.slow=performance.now()+7e3;else if(t.type==="multiball"){const d=T.current[0]||{x:l.current.x+l.current.w/2,y:l.current.y-10,vx:-200,vy:-320,r:k.current.r};X(d,2),C.current.multiball=performance.now()+12e3}t.alive=!1,D(t.x+t.w/2,t.y+t.h/2,20)}else t.y>c+40&&u.splice(s,1)}const o=performance.now();if(C.current.expand&&C.current.expand<o){C.current.expand=void 0;const s=e.width/Math.max(1,window.devicePixelRatio||1);l.current.w=Math.max(72,Math.min(220,s*.14))}if(C.current.slow&&C.current.slow<o&&(C.current.slow=void 0,ne(k.current)),de(n),pe(n),P.current.every(s=>!s.alive||s.type==="unbreakable")){const s=A+1;F(s),K(r,s),N(k.current,r,c,null),D(r/2,c/2,36)}}function _(){const n=i.current,e=n.getContext("2d"),r=n.width/Math.max(1,window.devicePixelRatio||1),c=n.height/Math.max(1,window.devicePixelRatio||1);e.fillStyle="#08121a",e.fillRect(0,0,r,c);for(const o of P.current)o.alive&&(o.type==="unbreakable"?e.fillStyle="#6b7280":o.type==="strong"?e.fillStyle=o.hits===2?"#f59e0b":"#fb923c":e.fillStyle=`hsl(${o.x%360+o.y%60},70%,60%)`,I(e,o.x,o.y,o.w,o.h,4),e.fill(),e.strokeStyle="rgba(0,0,0,0.18)",e.stroke());const x=l.current;e.fillStyle="#5eead4",I(e,x.x,x.y,x.w,x.h,6),e.fill();for(const o of T.current)e.beginPath(),e.fillStyle="#60a5fa",e.arc(o.x,o.y,o.r,0,Math.PI*2),e.fill();const u=B.current;for(let o=0;o<u.length;o++){const s=u[o],t=Math.max(0,s.life/.45),d=(1-t)*k.current.r*1.6+1;e.beginPath();const j=e.createRadialGradient(s.x,s.y,0,s.x,s.y,d*2);j.addColorStop(0,`rgba(96,165,250,${.5*t})`),j.addColorStop(1,"rgba(96,165,250,0)"),e.fillStyle=j,e.fillRect(s.x-d,s.y-d,d*2,d*2)}for(const o of $.current){const s=Math.max(0,o.life/1.2);e.save(),e.globalCompositeOperation="lighter";const t=Math.max(1,6*s),d=e.createRadialGradient(o.x,o.y,0,o.x,o.y,t*3);d.addColorStop(0,`rgba(255,220,120,${s})`),d.addColorStop(.6,`rgba(255,120,60,${s*.6})`),d.addColorStop(1,"rgba(255,120,60,0)"),e.fillStyle=d,e.fillRect(o.x-t*3,o.y-t*3,t*6,t*6),e.restore()}for(const o of E.current)o.alive&&(e.save(),e.fillStyle=o.type==="expand"?"#34d399":o.type==="life"?"#60a5fa":"#f472b6",I(e,o.x,o.y,o.w,o.h,4),e.fill(),e.fillStyle="#000000",e.font="12px sans-serif",e.fillText(o.type==="expand"?"E":o.type==="life"?"+1":"S",o.x+6,o.y+o.h-4),e.restore());e.fillStyle="#ffffff",e.font="14px sans-serif",e.fillText(`Score: ${R}`,12,c-12),e.fillText(`Lives: ${w}`,r-84,c-12),e.fillText(`Level: ${A}`,r/2-24,c-12)}function I(n,e,r,c,x,u){n.beginPath(),n.moveTo(e+u,r),n.arcTo(e+c,r,e+c,r+x,u),n.arcTo(e+c,r+x,e,r+x,u),n.arcTo(e,r+x,e,r,u),n.arcTo(e,r,e+c,r,u),n.closePath()}return v.useEffect(()=>{const n=i.current;function e(u){const o=n.getBoundingClientRect(),s=u.clientX-o.left;l.current.x=q(s-l.current.w/2,0,o.width-l.current.w)}function r(u){e(u),m||g(!0)}function c(){}function x(u){const o=n.getBoundingClientRect();u.key==="ArrowLeft"?l.current.x=q(l.current.x-l.current.speed*.03,0,o.width-l.current.w):u.key==="ArrowRight"?l.current.x=q(l.current.x+l.current.speed*.03,0,o.width-l.current.w):u.key===" "&&g(s=>!s)}return n.addEventListener("pointermove",e),n.addEventListener("pointerdown",r),window.addEventListener("pointerup",c),window.addEventListener("keydown",x),()=>{n.removeEventListener("pointermove",e),n.removeEventListener("pointerdown",r),window.removeEventListener("pointerup",c),window.removeEventListener("keydown",x)}},[m]),b.jsxs(ee,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[b.jsx(Te,{position:"static",color:"transparent",elevation:0,sx:{borderBottom:"1px solid rgba(255,255,255,0.06)"},children:b.jsxs(je,{children:[b.jsx(Ee,{edge:"start",color:"inherit",onClick:()=>z("/"),children:b.jsx($e,{})}),b.jsx(Ce,{variant:"h6",sx:{flex:1},children:"Breakout"}),b.jsxs(He,{direction:"row",spacing:1,alignItems:"center",children:[b.jsxs(Le,{value:M,size:"small",onChange:n=>h(n.target.value),children:[b.jsx(O,{value:"Easy",children:"Easy"}),b.jsx(O,{value:"Normal",children:"Normal"}),b.jsx(O,{value:"Hard",children:"Hard"})]}),b.jsx(te,{variant:"outlined",onClick:()=>g(n=>!n),children:m?"Pause":"Play"}),b.jsx(te,{variant:"contained",onClick:()=>{const n=i.current,e=n.width/Math.max(1,window.devicePixelRatio||1),r=n.height/Math.max(1,window.devicePixelRatio||1);V(e,r)},children:"Restart"})]})]})}),b.jsx(qe,{maxWidth:"lg",sx:{py:3,flex:1},children:b.jsx(Se,{sx:{p:2},children:b.jsx(ee,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:b.jsx("canvas",{ref:i,style:{touchAction:"none",maxWidth:"100%"}})})})})]})}export{Je as default};
